<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YoSinTV - Cricket | Football | Playing XI | Match Preview</title>
  <link href="/style.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link href='https://web.cricfoot.net/favico.png' rel='icon' type='image/x-icon'/>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5525538810839147" crossorigin="anonymous"></script>
    <!-- https://grok.com/c/5e9ca764-fae5-4ebc-8356-27c74fb98087 -->
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-all duration-300">

<header>
  <div class="header-container">
    <a href="https://www.yosin-tv.net/">
      <img src="https://web.cricfoot.net/logo.png" alt="YoSinTV" style="height:65px;">
    </a>
    <label class="toggle">
      <input type="checkbox" id="darkModeToggle">
      <span class="slider"></span>
    </label>
  </div>
</header>

  <main style="padding-top: 78px;">
    <center class="my-3">
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5525538810839147"
           data-ad-slot="4345862479" data-ad-format="auto" data-full-width-responsive="true"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </center>

    <div class="match-schedule-container"> 
      <h2 class="league-title"> Upcoming Football Matches</h2>
      <div id="cricket-list" class="match-schedule-list"></div>

      <center class="my-5">
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-5525538810839147"
             data-ad-slot="4345862479" data-ad-format="auto" data-full-width-responsive="true"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
      </center>
    </div>

    <section class="dmca-section">
      <h2 class="text-2xl font-bold mb-3">YoSinTV - DMCA Notice</h2>
      <p class="text-sm leading-relaxed">YoSinTV Doesn't host any media content on it own Site. Our site visitors might use external or third parties services to show content, (Example: Embedding media from sites like Bet365, Dailymotion , Streamable etc ..) We Notify all copyright owners, to discover that the links and media shared by visitors and contained within this site are hosted somewhere else on the web or embedded from other various sites like above.</p>
    </section>

    <footer class="footer text-sm">
      <a href="#about" class="text-blue-600 hover:underline mx-2">About</a> •
      <a href="#contact" class="text-blue-600 hover:underline mx-2">Contact</a> •
      <a href="#privacy" class="text-blue-600 hover:underline mx-2">Privacy Policy</a>
    </footer>
  </main>

  <script>
    // Dark Mode
    const toggle = document.getElementById('darkModeToggle');
    if (localStorage.getItem('darkMode') === 'true') {
      document.body.classList.add('dark');
      toggle.checked = true;
    }
    toggle.addEventListener('change', () => {
      document.body.classList.toggle('dark');
      localStorage.setItem('darkMode', toggle.checked);
    });

    let allMatches = [];

    async function loadMatches() {
      try {
        const res = await fetch('/api/football.json');
        if (!res.ok) throw new Error();
        const data = await res.json();
        allMatches = data.matches.map(m => ({ ...m }));
        renderMatches();
        updateStatusAndSort();
      } catch {
        document.getElementById('cricket-list').innerHTML = '<p class="text-center text-red-500 py-10">Failed to load matches</p>';
      }
    }

    function createCard(m) {
      const a = document.createElement('a');
      a.href = m.details_url;
      a.className = 'match-card';
      a.dataset.time = m.match_time || m.start;
      a.dataset.duration = m.duration || 5;

      a.innerHTML = `
        <div class="match-card-content">
          <div class="match-team">
            <img src="${m.team1_logo}" alt="${m.team1}" onerror="this.src='https://via.placeholder.com/52?text=?'">
            <p class="match-team-name">${m.team1}</p>
          </div>
          <div class="match-center">
            <p class="match-vs">VS</p>
            <p class="match-status" data-time="${m.match_time || m.start}" data-duration="${m.duration || 5}">Loading...</p>
          </div>
          <div class="match-team">
            <img src="${m.team2_logo}" alt="${m.team2}" onerror="this.src='https://via.placeholder.com/52?text=?'">
            <p class="match-team-name">${m.team2}</p>
          </div>
        </div>
      `;
      return a;
    }

    function renderMatches() {
      const list = document.getElementById('cricket-list');
      list.innerHTML = '';
      allMatches.forEach(match => list.appendChild(createCard(match)));
    }

    function updateStatusAndSort() {
      const now = Date.now();

      allMatches.forEach(match => {
        const startTime = new Date(match.match_time || match.start).getTime();
        const duration = (match.duration || 5) * 3600000;
        const endTime = startTime + duration;

        if (now >= startTime && now < endTime) {
          match.sortPriority = 1;
          match.sortValue = -startTime;
        } else if (now < startTime) {
          match.sortPriority = 2;
          match.sortValue = startTime;
        } else {
          match.sortPriority = 3;
          match.sortValue = endTime;
        }
      });

      allMatches.sort((a, b) => {
        if (a.sortPriority !== b.sortPriority) return a.sortPriority - b.sortPriority;
        return a.sortValue - b.sortValue;
      });

      renderMatches();

      document.querySelectorAll('.match-status').forEach(el => {
        const start = new Date(el.dataset.time).getTime();
        const duration = (parseInt(el.dataset.duration) || 5) * 3600000;
        const end = start + duration;

        if (now >= end) {
          el.textContent = 'Match End';
          el.className = 'match-status match-status-over';
        } else if (now >= start) {
          el.textContent = 'Live Now';
          el.className = 'match-status match-status-live';
        } else {
          const diff = start - now;
          const h = Math.floor(diff / 3600000);
          const m = Math.floor((diff % 3600000) / 60000);
          const s = Math.floor((diff % 60000) / 1000);
          el.textContent = `${h}h ${m}m ${s}s`;
          el.className = 'match-status match-status-countdown';
        }
      });

      setTimeout(updateStatusAndSort, 1000);
    }

    loadMatches();
  </script>
</body>
</html>
